{"ast":null,"code":"import React,{useState}from'react';import'./Settings.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL;console.log(\"API URL utilisée :\",apiUrl);const Settings=()=>{const[currentPassword,setCurrentPassword]=useState('');const[newPassword,setNewPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');// Handle password change\nconst handlePasswordChange=async e=>{e.preventDefault();if(newPassword!==confirmPassword){alert('Les nouveaux mots de passe ne correspondent pas.');return;}try{const response=await fetch(`${process.env.REACT_APP_API_URL}/api/users/change-password`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({currentPassword,newPassword})});if(response.ok){alert('Mot de passe modifié avec succès.');setCurrentPassword('');setNewPassword('');setConfirmPassword('');}else{alert('Erreur lors de la modification du mot de passe.');}}catch(error){console.error('Erreur lors de la modification du mot de passe:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"settings-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Param\\xE8tres\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Changer le mot de passe\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePasswordChange,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Mot de passe actuel :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:currentPassword,onChange:e=>setCurrentPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nouveau mot de passe :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newPassword,onChange:e=>setNewPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirmer le nouveau mot de passe :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Modifier le mot de passe\"})]})]})]});};export default Settings;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","apiUrl","process","env","REACT_APP_API_URL","console","log","Settings","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","handlePasswordChange","e","preventDefault","alert","response","fetch","method","headers","body","JSON","stringify","ok","error","className","children","onSubmit","type","value","onChange","target","required"],"sources":["C:/Users/mambo/Downloads/ONVM/frontend/src/components/Settings.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './Settings.css';\r\n\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nconsole.log(\"API URL utilisée :\", apiUrl);\r\n\r\nconst Settings = () => {\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n\r\n  // Handle password change\r\n  const handlePasswordChange = async (e) => {\r\n    e.preventDefault();\r\n    if (newPassword !== confirmPassword) {\r\n      alert('Les nouveaux mots de passe ne correspondent pas.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/users/change-password`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          currentPassword,\r\n          newPassword\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert('Mot de passe modifié avec succès.');\r\n        setCurrentPassword('');\r\n        setNewPassword('');\r\n        setConfirmPassword('');\r\n      } else {\r\n        alert('Erreur lors de la modification du mot de passe.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de la modification du mot de passe:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"settings-container\">\r\n      <h2>Paramètres</h2>\r\n\r\n      {/* Section de modification de mot de passe */}\r\n      <div className=\"password-section\">\r\n        <h3>Changer le mot de passe</h3>\r\n        <form onSubmit={handlePasswordChange}>\r\n          <div>\r\n            <label>Mot de passe actuel :</label>\r\n            <input\r\n              type=\"password\"\r\n              value={currentPassword}\r\n              onChange={(e) => setCurrentPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label>Nouveau mot de passe :</label>\r\n            <input\r\n              type=\"password\"\r\n              value={newPassword}\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label>Confirmer le nouveau mot de passe :</label>\r\n            <input\r\n              type=\"password\"\r\n              value={confirmPassword}\r\n              onChange={(e) => setConfirmPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\">Modifier le mot de passe</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}