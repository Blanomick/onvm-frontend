{"ast":null,"code":"import React,{useState}from'react';import{FaHome,FaSearch,FaBell,FaUserCircle}from'react-icons/fa';import{useNavigate}from'react-router-dom';import'./Search.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL;console.log(\"API URL utilisée :\",apiUrl);const Search=_ref=>{let{user}=_ref;const[searchTerm,setSearchTerm]=useState('');const[results,setResults]=useState([]);const navigate=useNavigate();const handleSearch=async e=>{e.preventDefault();if(!user||!user.id){console.error('Utilisateur non connecté ou ID non défini.');return;}try{const response=await axios.get(`${apiUrl}/api/search?q=${searchTerm}&userId=${user.id}`);setResults(response.data);}catch(err){console.error('[ERREUR] Erreur lors de la recherche des utilisateurs:',err);}};const handleFollow=async userId=>{try{await axios.post(`${apiUrl}/api/users/follow`,{followerId:user.id,followingId:userId});alert('Vous suivez maintenant cet utilisateur.');}catch(err){console.error(\"Erreur lors du suivi de l'utilisateur:\",err);}};const handleViewProfile=userId=>{navigate(`/profile/${userId}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"search-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:\"Logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-icons\",children:[/*#__PURE__*/_jsx(FaSearch,{onClick:()=>navigate('/search'),title:\"Rechercher\"}),/*#__PURE__*/_jsx(FaBell,{onClick:()=>navigate('/notifications'),title:\"Notifications\"}),/*#__PURE__*/_jsx(FaUserCircle,{onClick:()=>navigate('/profile'),title:\"Profil\"})]})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Recherche d'utilisateurs\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"search-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Rechercher un utilisateur...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Rechercher\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:results.length>0?results.map(result=>/*#__PURE__*/_jsxs(\"div\",{className:\"search-result\",onClick:()=>handleViewProfile(result.id),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"img\",{src:result.profilePicture?`${apiUrl}${result.profilePicture}`:'/default-profile.png',alt:`${result.username||'Profil utilisateur'}`,className:\"profile-picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:result.username}),/*#__PURE__*/_jsx(\"button\",{className:\"follow-btn\",onClick:e=>{e.stopPropagation();handleFollow(result.id);},children:\"Suivre\"})]})]},result.id)):/*#__PURE__*/_jsx(\"p\",{children:\"Aucun utilisateur trouv\\xE9.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-nav\",children:[/*#__PURE__*/_jsx(FaHome,{onClick:()=>navigate('/publication'),title:\"Accueil\"}),/*#__PURE__*/_jsx(FaSearch,{onClick:()=>navigate('/search'),title:\"Rechercher\"}),/*#__PURE__*/_jsx(FaBell,{onClick:()=>navigate('/notifications'),title:\"Notifications\"}),/*#__PURE__*/_jsx(FaUserCircle,{onClick:()=>navigate(`/profile/${user===null||user===void 0?void 0:user.id}`)})]})]});};export default Search;","map":{"version":3,"names":["React","useState","FaHome","FaSearch","FaBell","FaUserCircle","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","apiUrl","process","env","REACT_APP_API_URL","console","log","Search","_ref","user","searchTerm","setSearchTerm","results","setResults","navigate","handleSearch","e","preventDefault","id","error","response","get","data","err","handleFollow","userId","post","followerId","followingId","alert","handleViewProfile","className","children","onClick","title","onSubmit","type","placeholder","value","onChange","target","length","map","result","style","cursor","src","profilePicture","alt","username","stopPropagation"],"sources":["C:/Users/mambo/Downloads/ONVM/frontend/src/components/Search.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { FaHome, FaSearch, FaBell, FaUserCircle } from 'react-icons/fa';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Search.css';\r\nimport axios from 'axios';\r\n\r\n\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nconsole.log(\"API URL utilisée :\", apiUrl);\r\n\r\n\r\n\r\nconst Search = ({ user }) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [results, setResults] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!user || !user.id) {\r\n      console.error('Utilisateur non connecté ou ID non défini.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.get(`${apiUrl}/api/search?q=${searchTerm}&userId=${user.id}`);\r\n      setResults(response.data);\r\n    } catch (err) {\r\n      console.error('[ERREUR] Erreur lors de la recherche des utilisateurs:', err);\r\n    }\r\n  };\r\n\r\n  const handleFollow = async (userId) => {\r\n    try {\r\n      await axios.post(`${apiUrl}/api/users/follow`, {\r\n        followerId: user.id,\r\n        followingId: userId,\r\n      });\r\n      alert('Vous suivez maintenant cet utilisateur.');\r\n    } catch (err) {\r\n      console.error(\"Erreur lors du suivi de l'utilisateur:\", err);\r\n    }\r\n  };\r\n\r\n  const handleViewProfile = (userId) => {\r\n    navigate(`/profile/${userId}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-page\">\r\n      {/* En-tête */}\r\n      <div className=\"header\">\r\n        <div className=\"logo\">Logo</div>\r\n        <div className=\"header-icons\">\r\n          <FaSearch onClick={() => navigate('/search')} title=\"Rechercher\" />\r\n          <FaBell onClick={() => navigate('/notifications')} title=\"Notifications\" />\r\n          <FaUserCircle onClick={() => navigate('/profile')} title=\"Profil\" />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Formulaire de recherche */}\r\n      <h2>Recherche d'utilisateurs</h2>\r\n      <form onSubmit={handleSearch} className=\"search-form\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Rechercher un utilisateur...\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n        />\r\n        <button type=\"submit\">Rechercher</button>\r\n      </form>\r\n\r\n      {/* Résultats de recherche */}\r\n      <div className=\"search-results\">\r\n        {results.length > 0 ? (\r\n          results.map((result) => (\r\n            <div\r\n              key={result.id}\r\n              className=\"search-result\"\r\n              onClick={() => handleViewProfile(result.id)}\r\n              style={{ cursor: 'pointer' }}\r\n            >\r\n              <img\r\n                src={\r\n                  result.profilePicture\r\n                    ? `${apiUrl}${result.profilePicture}`\r\n                    : '/default-profile.png'\r\n                }\r\n                alt={`${result.username || 'Profil utilisateur'}`}\r\n                className=\"profile-picture\"\r\n              />\r\n              <div className=\"user-info\">\r\n                <p>{result.username}</p>\r\n                <button\r\n                  className=\"follow-btn\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    handleFollow(result.id);\r\n                  }}\r\n                >\r\n                  Suivre\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <p>Aucun utilisateur trouvé.</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Navigation inférieure */}\r\n      <div className=\"bottom-nav\">\r\n        <FaHome onClick={() => navigate('/publication')} title=\"Accueil\" />\r\n        <FaSearch onClick={() => navigate('/search')} title=\"Rechercher\" />\r\n        <FaBell onClick={() => navigate('/notifications')} title=\"Notifications\" />\r\n        <FaUserCircle onClick={() => navigate(`/profile/${user?.id}`)} />\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,MAAM,CAAEC,QAAQ,CAAEC,MAAM,CAAEC,YAAY,KAAQ,gBAAgB,CACvE,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,cAAc,CACrB,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAI1B,KAAM,CAAAC,MAAM,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAE5CC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEL,MAAM,CAAC,CAIzC,KAAM,CAAAM,MAAM,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CACtB,KAAM,CAACE,UAAU,CAAEC,aAAa,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACsB,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAAwB,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAoB,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAI,CAACR,IAAI,EAAI,CAACA,IAAI,CAACS,EAAE,CAAE,CACrBb,OAAO,CAACc,KAAK,CAAC,4CAA4C,CAAC,CAC3D,OACF,CAEA,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAxB,KAAK,CAACyB,GAAG,CAAC,GAAGpB,MAAM,iBAAiBS,UAAU,WAAWD,IAAI,CAACS,EAAE,EAAE,CAAC,CAC1FL,UAAU,CAACO,QAAQ,CAACE,IAAI,CAAC,CAC3B,CAAE,MAAOC,GAAG,CAAE,CACZlB,OAAO,CAACc,KAAK,CAAC,wDAAwD,CAAEI,GAAG,CAAC,CAC9E,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,MAAM,EAAK,CACrC,GAAI,CACF,KAAM,CAAA7B,KAAK,CAAC8B,IAAI,CAAC,GAAGzB,MAAM,mBAAmB,CAAE,CAC7C0B,UAAU,CAAElB,IAAI,CAACS,EAAE,CACnBU,WAAW,CAAEH,MACf,CAAC,CAAC,CACFI,KAAK,CAAC,yCAAyC,CAAC,CAClD,CAAE,MAAON,GAAG,CAAE,CACZlB,OAAO,CAACc,KAAK,CAAC,wCAAwC,CAAEI,GAAG,CAAC,CAC9D,CACF,CAAC,CAED,KAAM,CAAAO,iBAAiB,CAAIL,MAAM,EAAK,CACpCX,QAAQ,CAAC,YAAYW,MAAM,EAAE,CAAC,CAChC,CAAC,CAED,mBACEzB,KAAA,QAAK+B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAE1BhC,KAAA,QAAK+B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBlC,IAAA,QAAKiC,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,MAAI,CAAK,CAAC,cAChChC,KAAA,QAAK+B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BlC,IAAA,CAACN,QAAQ,EAACyC,OAAO,CAAEA,CAAA,GAAMnB,QAAQ,CAAC,SAAS,CAAE,CAACoB,KAAK,CAAC,YAAY,CAAE,CAAC,cACnEpC,IAAA,CAACL,MAAM,EAACwC,OAAO,CAAEA,CAAA,GAAMnB,QAAQ,CAAC,gBAAgB,CAAE,CAACoB,KAAK,CAAC,eAAe,CAAE,CAAC,cAC3EpC,IAAA,CAACJ,YAAY,EAACuC,OAAO,CAAEA,CAAA,GAAMnB,QAAQ,CAAC,UAAU,CAAE,CAACoB,KAAK,CAAC,QAAQ,CAAE,CAAC,EACjE,CAAC,EACH,CAAC,cAGNpC,IAAA,OAAAkC,QAAA,CAAI,0BAAwB,CAAI,CAAC,cACjChC,KAAA,SAAMmC,QAAQ,CAAEpB,YAAa,CAACgB,SAAS,CAAC,aAAa,CAAAC,QAAA,eACnDlC,IAAA,UACEsC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,8BAA8B,CAC1CC,KAAK,CAAE5B,UAAW,CAClB6B,QAAQ,CAAGvB,CAAC,EAAKL,aAAa,CAACK,CAAC,CAACwB,MAAM,CAACF,KAAK,CAAE,CAChD,CAAC,cACFxC,IAAA,WAAQsC,IAAI,CAAC,QAAQ,CAAAJ,QAAA,CAAC,YAAU,CAAQ,CAAC,EACrC,CAAC,cAGPlC,IAAA,QAAKiC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BpB,OAAO,CAAC6B,MAAM,CAAG,CAAC,CACjB7B,OAAO,CAAC8B,GAAG,CAAEC,MAAM,eACjB3C,KAAA,QAEE+B,SAAS,CAAC,eAAe,CACzBE,OAAO,CAAEA,CAAA,GAAMH,iBAAiB,CAACa,MAAM,CAACzB,EAAE,CAAE,CAC5C0B,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAAb,QAAA,eAE7BlC,IAAA,QACEgD,GAAG,CACDH,MAAM,CAACI,cAAc,CACjB,GAAG9C,MAAM,GAAG0C,MAAM,CAACI,cAAc,EAAE,CACnC,sBACL,CACDC,GAAG,CAAE,GAAGL,MAAM,CAACM,QAAQ,EAAI,oBAAoB,EAAG,CAClDlB,SAAS,CAAC,iBAAiB,CAC5B,CAAC,cACF/B,KAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBlC,IAAA,MAAAkC,QAAA,CAAIW,MAAM,CAACM,QAAQ,CAAI,CAAC,cACxBnD,IAAA,WACEiC,SAAS,CAAC,YAAY,CACtBE,OAAO,CAAGjB,CAAC,EAAK,CACdA,CAAC,CAACkC,eAAe,CAAC,CAAC,CACnB1B,YAAY,CAACmB,MAAM,CAACzB,EAAE,CAAC,CACzB,CAAE,CAAAc,QAAA,CACH,QAED,CAAQ,CAAC,EACN,CAAC,GAzBDW,MAAM,CAACzB,EA0BT,CACN,CAAC,cAEFpB,IAAA,MAAAkC,QAAA,CAAG,8BAAyB,CAAG,CAChC,CACE,CAAC,cAGNhC,KAAA,QAAK+B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBlC,IAAA,CAACP,MAAM,EAAC0C,OAAO,CAAEA,CAAA,GAAMnB,QAAQ,CAAC,cAAc,CAAE,CAACoB,KAAK,CAAC,SAAS,CAAE,CAAC,cACnEpC,IAAA,CAACN,QAAQ,EAACyC,OAAO,CAAEA,CAAA,GAAMnB,QAAQ,CAAC,SAAS,CAAE,CAACoB,KAAK,CAAC,YAAY,CAAE,CAAC,cACnEpC,IAAA,CAACL,MAAM,EAACwC,OAAO,CAAEA,CAAA,GAAMnB,QAAQ,CAAC,gBAAgB,CAAE,CAACoB,KAAK,CAAC,eAAe,CAAE,CAAC,cAC3EpC,IAAA,CAACJ,YAAY,EAACuC,OAAO,CAAEA,CAAA,GAAMnB,QAAQ,CAAC,YAAYL,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAES,EAAE,EAAE,CAAE,CAAE,CAAC,EAE9D,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAX,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}