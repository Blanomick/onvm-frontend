{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useNavigate,useParams}from'react-router-dom';import'./Profile.css';import{FaVideo,FaComment,FaShare,FaRetweet,FaWallet}from'react-icons/fa';// Ajout de l'icône de portefeuille\nimport Cropper from'react-cropper';import'cropperjs/dist/cropper.css';import BottomNav from'./BottomNav';import{FaHome,FaSearch,FaPlus,FaBell,FaUser}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL;console.log(\"API URL utilisée :\",apiUrl);const Profile=_ref=>{let{currentUser}=_ref;const{id}=useParams();const navigate=useNavigate();const[profileUser,setProfileUser]=useState(null);const[bio,setBio]=useState('Bienvenue sur mon profil!');const[followerCount,setFollowerCount]=useState(0);const[posts,setPosts]=useState([]);const[retweets,setRetweets]=useState([]);const[isOwner,setIsOwner]=useState(false);const[isFollowing,setIsFollowing]=useState(false);const[newProfileImage,setNewProfileImage]=useState(null);const[cropper,setCropper]=useState(null);const[comments,setComments]=useState({});const[activeComments,setActiveComments]=useState({});const[newComment,setNewComment]=useState('');const[balance,setBalance]=useState(0);const[transactions,setTransactions]=useState([]);const[extraData,setExtraData]=useState(null);// Ajoutez cet état pour stocker les données supplémentaires\nconst[response,setResponse]=useState(null);const[activeTab,setActiveTab]=useState('publications');// Onglet actif : 'publications' ou 'retweets'\nconst[showBottomNav,setShowBottomNav]=useState(true);// Par défaut, la barre est visible\nconst[isCreating,setIsCreating]=useState(false);// Portefeuille - Handle withdrawal action\nconst handleWithdraw=()=>{if(balance===0){alert(\"Votre portefeuille est vide.\");}else{alert(\"Fonction de retrait indisponible pour l'instant.\");}};const fetchProfileData=useCallback(async()=>{try{const res=await fetch(`${apiUrl}/api/users/${id}`);if(!res.ok)throw new Error('Erreur lors de la récupération des données utilisateur.');const data=await res.json();setProfileUser(data);setBio(data.bio||'Bienvenue sur mon profil!');setIsOwner(currentUser&&currentUser.id===parseInt(id));// Utilisation de setIsOwner\nsetResponse(data);// Met à jour response avec les données reçues\nconst[followerResponse,postsResponse,retweetsResponse,isFollowingResponse]=await Promise.all([fetch(`${apiUrl}/api/users/${id}/followers`),fetch(`${apiUrl}/api/users/${id}/publications`),fetch(`${apiUrl}/api/users/${id}/retweets`),fetch(`${apiUrl}/api/users/${id}/is-following?followerId=${currentUser?currentUser.id:null}`)]);const[followerData,postsData,retweetsData,isFollowingData]=await Promise.all([followerResponse.json(),postsResponse.json(),retweetsResponse.json(),isFollowingResponse.json()]);setFollowerCount(followerData.totalFollowers||0);setPosts(postsData);setRetweets(retweetsData);setIsFollowing(isFollowingData.isFollowing);}catch(error){console.error('[ERREUR] Erreur lors de la récupération du profil:',error);}},[currentUser,id]);// Dépendances pour stabiliser la fonction\n// Fonction `fetchWalletData` enveloppée avec `useCallback`\nconst fetchWalletData=useCallback(async()=>{try{const responseBalance=await fetch(`${apiUrl}/api/wallet/${currentUser.id}/balance`);if(!responseBalance.ok){throw new Error(`Erreur ${responseBalance.status} lors de la récupération du solde`);}const balanceData=await responseBalance.json();setBalance(balanceData.balance||0);console.log(`[INFO] Solde récupéré: ${balanceData.balance||0}`);const responseTransactions=await fetch(`${apiUrl}/api/wallet/${currentUser.id}/history`);if(!responseTransactions.ok){throw new Error(`Erreur ${responseTransactions.status} lors de la récupération des transactions`);}const transactionsData=await responseTransactions.json();setTransactions(transactionsData.transactions||[]);console.log(`[INFO] Historique des transactions récupéré:`,transactionsData.transactions||[]);}catch(error){console.error('[ERREUR] Erreur lors de la récupération des données de portefeuille :',error);}},[currentUser.id]);// Handle file change for profile picture\nconst handleFileChange=e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onload=()=>setNewProfileImage(reader.result);reader.readAsDataURL(file);}};// Save the cropped profile image\nconst handleProfileImageSave=async()=>{if(!newProfileImage||!cropper)return;cropper.getCroppedCanvas().toBlob(async blob=>{const formData=new FormData();formData.append('profilePicture',blob,'profile-picture.png');try{const response=await fetch(`${apiUrl}/api/users/${id}/profile-picture`,{method:'PUT',body:formData});if(response.ok){alert('Photo de profil mise à jour avec succès!');setNewProfileImage(null);// Reset the profile image after saving\nsetCropper(null);// Reset the cropper instance\nfetchProfileData();// Refresh profile data\n}else{alert('Erreur lors de la mise à jour de la photo de profil.');}}catch(error){console.error('[ERREUR] Erreur lors de la mise à jour de la photo de profil:',error);}});};// Fonction pour gérer les retweets\nconst handleRetweet=async postId=>{try{const response=await fetch(`${apiUrl}/api/publications/${postId}/retweet`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:currentUser.id})});if(response.ok){alert(\"Publication retweetée avec succès !\");fetchProfileData();// Rafraîchir les données de profil\n}else{alert(\"Erreur lors du retweet de la publication.\");}}catch(error){console.error('[ERREUR] Erreur lors du retweet :',error);}};const handleDeletePost=async postId=>{try{const response=await fetch(`${apiUrl}/api/publications/${postId}`,{method:'DELETE'});if(response.ok){alert('Publication supprimée avec succès!');setPosts(prevPosts=>prevPosts.filter(post=>post.id!==postId));}else{alert(\"Erreur lors de la suppression de la publication.\");}}catch(error){console.error('[ERREUR] Erreur lors de la suppression de la publication :',error);}};const handleDeleteRetweet=async publicationId=>{try{const response=await fetch(`${apiUrl}/api/retweets/${publicationId}/${currentUser.id}`,{method:'DELETE'});if(response.ok){alert('Retweet supprimé avec succès!');setRetweets(prevRetweets=>prevRetweets.filter(r=>r.id!==publicationId));}else{alert(\"Erreur lors de la suppression du retweet.\");}}catch(error){console.error('[ERREUR] Erreur lors de la suppression du retweet :',error);}};// Handle follow/unfollow action\nconst handleFollow=async()=>{try{const url=isFollowing?'/unfollow':'/follow';const response=await fetch(`${apiUrl}/api/users${url}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({followerId:currentUser.id,followingId:profileUser.id})});if(response.ok){setFollowerCount(prevCount=>isFollowing?prevCount-1:prevCount+1);setIsFollowing(!isFollowing);console.log(\"Action de suivi réussie :\",await response.json());// Affiche les détails de la réponse\n}else{console.error(\"Erreur lors de l'action de suivi :\",await response.json());}}catch(error){console.error('[ERREUR] Erreur lors du suivi:',error);}};// Save biography\nconst handleBioSave=async()=>{try{const response=await fetch(`${apiUrl}/api/users/${id}/bio`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({bio})});if(response.ok){alert('Biographie mise à jour avec succès!');}else{alert('Erreur lors de la mise à jour de la biographie.');}}catch(error){console.error('[ERREUR] Erreur lors de l\\'enregistrement de la biographie:',error);}};// Handle comments for a post\nconst handleComment=async(postId,comment)=>{if(!comment.trim()){alert(\"Le commentaire ne peut pas être vide.\");return;}try{await fetch(`${apiUrl}/api/publications/${postId}/comment`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:currentUser.id,comment})});fetchProfileData();// Refresh profile data after adding comment\n}catch(error){console.error('[ERREUR] Erreur lors du commentaire:',error);}};// Share a post\nconst handleShare=postId=>{alert(`Publication partagée : ${postId}`);};// Fetch comments for a post\nconst fetchComments=async postId=>{try{const response=await fetch(`${apiUrl}/api/publications/${postId}/comments`);const data=await response.json();setComments(prevComments=>({...prevComments,[postId]:data}));setActiveComments(prev=>({...prev,[postId]:!prev[postId]}));}catch(error){console.error('[ERREUR] Erreur lors de la récupération des commentaires:',error);}};const fetchExtraProfileData=useCallback(async()=>{try{const res=await fetch(`${apiUrl}/api/users/${id}/extra-data`);if(!res.ok)throw new Error(\"Erreur lors de la récupération des données supplémentaires\");const data=await res.json();setExtraData(data);console.log(data);}catch(error){console.error(\"[ERREUR] Erreur lors de la récupération des données supplémentaires:\",error);}},[id]);// Appelez ensuite les fonctions dans `useEffect` pour charger les données supplémentaires\nuseEffect(()=>{if(currentUser){// Récupérer les données de profil de l'utilisateur\nfetchProfileData();// Récupérer les données supplémentaires\nfetchExtraProfileData();// Récupérer les données du portefeuille\nfetchWalletData();}},[currentUser,fetchProfileData,fetchExtraProfileData,fetchWalletData]);// Cela appelle les fonctions quand `currentUser` change\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[profileUser?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:profileUser.profilePicture?`${apiUrl}${profileUser.profilePicture}`:'/images/default-profile.png'// Chemin de l'image par défaut\n,alt:\"Profile\",className:\"profile-picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:(profileUser===null||profileUser===void 0?void 0:profileUser.username)||'Nom indisponible'}),isOwner&&/*#__PURE__*/_jsx(\"button\",{children:\"Modifier le profil\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:followerCount}),\" abonn\\xE9s\"]}),isOwner?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange}),newProfileImage&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Cropper,{src:newProfileImage,style:{height:200,width:'100%'},aspectRatio:1,guides:false,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:false,responsive:true,autoCropArea:1,checkOrientation:false,onInitialized:instance=>setCropper(instance)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleProfileImageSave,children:\"Confirmer la nouvelle photo de profil\"})]})]}):/*#__PURE__*/_jsx(\"button\",{onClick:handleFollow,children:isFollowing?'Se désabonner':'Suivre'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:`tab-button ${activeTab==='publications'?'active':''}`,onClick:()=>setActiveTab('publications'),children:\"Mes Publications\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab-button ${activeTab==='retweets'?'active':''}`,onClick:()=>setActiveTab('retweets'),children:\"Mes Retweets\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-bio\",children:isOwner?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"textarea\",{value:bio,onChange:e=>setBio(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBioSave,children:\"Enregistrer la bio\"})]}):/*#__PURE__*/_jsx(\"p\",{children:profileUser.bio||'Cet utilisateur n\\'a pas encore de biographie.'})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Donn\\xE9es suppl\\xE9mentaires :\",extraData&&typeof extraData==='object'?/*#__PURE__*/_jsx(\"ul\",{children:Object.entries(extraData).map(_ref2=>{let[key,value]=_ref2;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[key,\" :\"]}),\" \",value]},key);})}):'Aucune donnée']}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-history\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Historique des Transactions\"}),transactions.length>0?/*#__PURE__*/_jsx(\"ul\",{children:transactions.map(transaction=>/*#__PURE__*/_jsxs(\"li\",{children:[transaction.type==='earn'?'Gagné':'Dépensé',\" : \",transaction.amount,\" ONVM Coins le\",' ',new Date(transaction.date).toLocaleDateString()]},transaction.transactionId))}):/*#__PURE__*/_jsx(\"p\",{children:\"Aucune transaction pour le moment.\"})]}),isOwner&&/*#__PURE__*/_jsxs(\"div\",{className:\"actions-section\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"action-button live-button\",onClick:()=>navigate('/live'),children:[/*#__PURE__*/_jsx(FaVideo,{}),\" D\\xE9marrer un Live\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button withdraw-button\",onClick:handleWithdraw,children:\"Retirer\"})]}),posts.length>0?posts.map(post=>{var _comments$post$id,_comments$post$id2;return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-post\",children:[post.media?post.media.endsWith('.mp4')?/*#__PURE__*/_jsx(\"video\",{src:`${apiUrl}${post.media}`,controls:true}):/*#__PURE__*/_jsx(\"img\",{src:`${apiUrl}${post.media}`,alt:post.content}):/*#__PURE__*/_jsx(\"p\",{children:post.content}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteRetweet(post.id),title:\"Supprimer ce retweet\",children:\"\\u2716\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDeletePost(post.id),title:\"Supprimer cette publication\",children:\"\\u2716\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>fetchComments(post.id),children:[/*#__PURE__*/_jsx(FaComment,{}),\" \",((_comments$post$id=comments[post.id])===null||_comments$post$id===void 0?void 0:_comments$post$id.length)||0,\" Commentaires\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleShare(post.id),children:[/*#__PURE__*/_jsx(FaShare,{}),\" Partager\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleRetweet(post.id),children:[/*#__PURE__*/_jsx(FaRetweet,{}),\" Retweeter\"]})]}),activeComments[post.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"comments-section\",children:[(_comments$post$id2=comments[post.id])===null||_comments$post$id2===void 0?void 0:_comments$post$id2.map((comment,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(\"img\",{src:comment.profilePicture?`${apiUrl}${comment.profilePicture}`:'/default-profile.png',alt:\"Profil\",className:\"profile-picture-comment\"}),/*#__PURE__*/_jsx(\"strong\",{children:comment.username}),/*#__PURE__*/_jsx(\"p\",{children:comment.comment})]},index)),/*#__PURE__*/_jsxs(\"div\",{className:\"add-comment-section\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:\"Ajouter un commentaire...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleComment(post.id,newComment),children:\"Envoyer\"})]})]})]},post.id);}):/*#__PURE__*/_jsx(\"p\",{children:\"Aucune publication pour le moment.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:`tab-button ${activeTab==='publications'?'active':''}`,onClick:()=>setActiveTab('publications'),children:\"Mes Publications\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab-button ${activeTab==='retweets'?'active':''}`,onClick:()=>setActiveTab('retweets'),children:\"Mes Retweets\"})]}),activeTab==='publications'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Mes publications\"}),posts.length>0?posts.map(post=>/*#__PURE__*/_jsx(\"div\",{className:\"profile-post\",children:post.media?post.media.endsWith('.mp4')?/*#__PURE__*/_jsx(\"video\",{src:`${apiUrl}${post.media}`,controls:true}):/*#__PURE__*/_jsx(\"img\",{src:`${apiUrl}${post.media}`,alt:post.content}):/*#__PURE__*/_jsx(\"p\",{children:post.content})},post.id)):/*#__PURE__*/_jsx(\"p\",{children:\"Aucune publication pour le moment.\"})]}),activeTab==='retweets'&&/*#__PURE__*/_jsxs(\"div\",{className:\"retweets-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Mes retweets\"}),retweets.length>0?retweets.map(retweet=>{var _comments$retweet$id;return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-post\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteRetweet(retweet.id),title:\"Supprimer ce retweet\",children:\"\\u2716\"}),/*#__PURE__*/_jsx(\"p\",{children:retweet.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>fetchComments(retweet.id),children:[/*#__PURE__*/_jsx(FaComment,{}),\" \",((_comments$retweet$id=comments[retweet.id])===null||_comments$retweet$id===void 0?void 0:_comments$retweet$id.length)||0,\" Commentaires\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleShare(retweet.id),children:[/*#__PURE__*/_jsx(FaShare,{}),\" Partager\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleRetweet(retweet.id),children:[/*#__PURE__*/_jsx(FaRetweet,{}),\" Retweeter\"]})]})]},retweet.id);}):/*#__PURE__*/_jsx(\"p\",{children:\"Aucun retweet pour le moment.\"})]})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Chargement...\"}),/*#__PURE__*/_jsxs(\"div\",{className:`bottom-nav ${showBottomNav?'visible':'hidden'}`,children:[/*#__PURE__*/_jsx(FaHome,{onClick:()=>navigate('/'),title:\"Accueil\"}),/*#__PURE__*/_jsx(FaSearch,{onClick:()=>navigate('/search'),title:\"Recherche\"}),/*#__PURE__*/_jsx(FaPlus,{onClick:()=>setIsCreating(prev=>!prev),title:\"Cr\\xE9er une publication\"}),/*#__PURE__*/_jsx(FaBell,{onClick:()=>navigate('/notifications'),title:\"Notifications\"}),/*#__PURE__*/_jsx(FaUser,{onClick:()=>navigate(`/profile/${currentUser===null||currentUser===void 0?void 0:currentUser.id}`),title:\"Mon profil\"})]})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useParams","FaVideo","FaComment","FaShare","FaRetweet","FaWallet","Cropper","BottomNav","FaHome","FaSearch","FaPlus","FaBell","FaUser","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","apiUrl","process","env","REACT_APP_API_URL","console","log","Profile","_ref","currentUser","id","navigate","profileUser","setProfileUser","bio","setBio","followerCount","setFollowerCount","posts","setPosts","retweets","setRetweets","isOwner","setIsOwner","isFollowing","setIsFollowing","newProfileImage","setNewProfileImage","cropper","setCropper","comments","setComments","activeComments","setActiveComments","newComment","setNewComment","balance","setBalance","transactions","setTransactions","extraData","setExtraData","response","setResponse","activeTab","setActiveTab","showBottomNav","setShowBottomNav","isCreating","setIsCreating","handleWithdraw","alert","fetchProfileData","res","fetch","ok","Error","data","json","parseInt","followerResponse","postsResponse","retweetsResponse","isFollowingResponse","Promise","all","followerData","postsData","retweetsData","isFollowingData","totalFollowers","error","fetchWalletData","responseBalance","status","balanceData","responseTransactions","transactionsData","handleFileChange","e","file","target","files","reader","FileReader","onload","result","readAsDataURL","handleProfileImageSave","getCroppedCanvas","toBlob","blob","formData","FormData","append","method","body","handleRetweet","postId","headers","JSON","stringify","userId","handleDeletePost","prevPosts","filter","post","handleDeleteRetweet","publicationId","prevRetweets","r","handleFollow","url","followerId","followingId","prevCount","handleBioSave","handleComment","comment","trim","handleShare","fetchComments","prevComments","prev","fetchExtraProfileData","className","children","src","profilePicture","alt","username","type","onChange","style","height","width","aspectRatio","guides","viewMode","minCropBoxHeight","minCropBoxWidth","background","responsive","autoCropArea","checkOrientation","onInitialized","instance","onClick","value","Object","entries","map","_ref2","key","length","transaction","amount","Date","date","toLocaleDateString","transactionId","_comments$post$id","_comments$post$id2","media","endsWith","controls","content","title","index","placeholder","retweet","_comments$retweet$id"],"sources":["C:/Users/mambo/Downloads/ONVM/frontend/src/components/profile.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport './Profile.css';\r\nimport { FaVideo, FaComment, FaShare, FaRetweet, FaWallet } from 'react-icons/fa'; // Ajout de l'icône de portefeuille\r\nimport Cropper from 'react-cropper';\r\nimport 'cropperjs/dist/cropper.css';\r\nimport BottomNav from './BottomNav';\r\nimport { FaHome, FaSearch, FaPlus, FaBell, FaUser } from 'react-icons/fa';\r\n\r\n\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nconsole.log(\"API URL utilisée :\", apiUrl);\r\n\r\n\r\n\r\n\r\nconst Profile = ({ currentUser }) => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [profileUser, setProfileUser] = useState(null);\r\n  const [bio, setBio] = useState('Bienvenue sur mon profil!');\r\n  const [followerCount, setFollowerCount] = useState(0);\r\n  const [posts, setPosts] = useState([]);\r\n  const [retweets, setRetweets] = useState([]);\r\n  const [isOwner, setIsOwner] = useState(false);\r\n  const [isFollowing, setIsFollowing] = useState(false);\r\n  const [newProfileImage, setNewProfileImage] = useState(null);\r\n  const [cropper, setCropper] = useState(null);\r\n  const [comments, setComments] = useState({});\r\n  const [activeComments, setActiveComments] = useState({});\r\n  const [newComment, setNewComment] = useState('');\r\n  const [balance, setBalance] = useState(0);\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [extraData, setExtraData] = useState(null); // Ajoutez cet état pour stocker les données supplémentaires\r\n  const [response, setResponse] = useState(null);\r\n  const [activeTab, setActiveTab] = useState('publications'); // Onglet actif : 'publications' ou 'retweets'\r\n  const [showBottomNav, setShowBottomNav] = useState(true); // Par défaut, la barre est visible\r\n  const [isCreating, setIsCreating] = useState(false);\r\n\r\n\r\n\r\n\r\n\r\n  // Portefeuille - Handle withdrawal action\r\n  const handleWithdraw = () => {\r\n    if (balance === 0) {\r\n      alert(\"Votre portefeuille est vide.\");\r\n    } else {\r\n      alert(\"Fonction de retrait indisponible pour l'instant.\");\r\n    }\r\n  };\r\n\r\n  const fetchProfileData = useCallback(async () => {\r\n    try {\r\n      const res = await fetch(`${apiUrl}/api/users/${id}`);\r\n      if (!res.ok) throw new Error('Erreur lors de la récupération des données utilisateur.');\r\n      const data = await res.json();\r\n\r\n      setProfileUser(data);\r\n      setBio(data.bio || 'Bienvenue sur mon profil!');\r\n      setIsOwner(currentUser && currentUser.id === parseInt(id)); // Utilisation de setIsOwner\r\n      setResponse(data); // Met à jour response avec les données reçues\r\n\r\n      const [followerResponse, postsResponse, retweetsResponse, isFollowingResponse] = await Promise.all([\r\n        fetch(`${apiUrl}/api/users/${id}/followers`),\r\n        fetch(`${apiUrl}/api/users/${id}/publications`),\r\n        fetch(`${apiUrl}/api/users/${id}/retweets`),\r\n        fetch(`${apiUrl}/api/users/${id}/is-following?followerId=${currentUser ? currentUser.id : null}`)\r\n      ]);\r\n\r\n      const [followerData, postsData, retweetsData, isFollowingData] = await Promise.all([\r\n        followerResponse.json(),\r\n        postsResponse.json(),\r\n        retweetsResponse.json(),\r\n        isFollowingResponse.json()\r\n      ]);\r\n\r\n      setFollowerCount(followerData.totalFollowers || 0);\r\n      setPosts(postsData);\r\n      setRetweets(retweetsData);\r\n      setIsFollowing(isFollowingData.isFollowing);\r\n    } catch (error) {\r\n      console.error('[ERREUR] Erreur lors de la récupération du profil:', error);\r\n    }\r\n  }, [currentUser, id]); // Dépendances pour stabiliser la fonction\r\n\r\n\r\n  // Fonction `fetchWalletData` enveloppée avec `useCallback`\r\n  const fetchWalletData = useCallback(async () => {\r\n    try {\r\n      const responseBalance = await fetch(`${apiUrl}/api/wallet/${currentUser.id}/balance`);\r\n\r\n      if (!responseBalance.ok) {\r\n        throw new Error(`Erreur ${responseBalance.status} lors de la récupération du solde`);\r\n      }\r\n\r\n      const balanceData = await responseBalance.json();\r\n      setBalance(balanceData.balance || 0);\r\n      console.log(`[INFO] Solde récupéré: ${balanceData.balance || 0}`);\r\n\r\n      const responseTransactions = await fetch(`${apiUrl}/api/wallet/${currentUser.id}/history`);\r\n\r\n      if (!responseTransactions.ok) {\r\n        throw new Error(`Erreur ${responseTransactions.status} lors de la récupération des transactions`);\r\n      }\r\n\r\n      const transactionsData = await responseTransactions.json();\r\n      setTransactions(transactionsData.transactions || []);\r\n      console.log(`[INFO] Historique des transactions récupéré:`, transactionsData.transactions || []);\r\n\r\n    } catch (error) {\r\n      console.error('[ERREUR] Erreur lors de la récupération des données de portefeuille :', error);\r\n    }\r\n  }, [currentUser.id,]);\r\n\r\n\r\n\r\n  // Handle file change for profile picture\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = () => setNewProfileImage(reader.result);\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  // Save the cropped profile image\r\n  const handleProfileImageSave = async () => {\r\n    if (!newProfileImage || !cropper) return;\r\n\r\n    cropper.getCroppedCanvas().toBlob(async (blob) => {\r\n      const formData = new FormData();\r\n      formData.append('profilePicture', blob, 'profile-picture.png');\r\n\r\n      try {\r\n        const response = await fetch(`${apiUrl}/api/users/${id}/profile-picture`, {\r\n          method: 'PUT',\r\n          body: formData,\r\n        });\r\n\r\n        if (response.ok) {\r\n          alert('Photo de profil mise à jour avec succès!');\r\n          setNewProfileImage(null); // Reset the profile image after saving\r\n          setCropper(null); // Reset the cropper instance\r\n          fetchProfileData(); // Refresh profile data\r\n        } else {\r\n          alert('Erreur lors de la mise à jour de la photo de profil.');\r\n        }\r\n      } catch (error) {\r\n        console.error('[ERREUR] Erreur lors de la mise à jour de la photo de profil:', error);\r\n      }\r\n    });\r\n  };\r\n\r\n\r\n  // Fonction pour gérer les retweets\r\n  \r\n    \r\n    \r\n\r\n  const handleRetweet = async (postId) => {\r\n    try {\r\n      const response = await fetch(`${apiUrl}/api/publications/${postId}/retweet`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId: currentUser.id })\r\n      });\r\n  \r\n      if (response.ok) {\r\n        alert(\"Publication retweetée avec succès !\");\r\n        fetchProfileData(); // Rafraîchir les données de profil\r\n      } else {\r\n        alert(\"Erreur lors du retweet de la publication.\");\r\n      }\r\n    } catch (error) {\r\n      console.error('[ERREUR] Erreur lors du retweet :', error);\r\n    }\r\n  };\r\n  \r\n\r\n\r\n  const handleDeletePost = async (postId) => {\r\n    try {\r\n      const response = await fetch(`${apiUrl}/api/publications/${postId}`, {\r\n        method: 'DELETE',\r\n      });\r\n  \r\n      if (response.ok) {\r\n        alert('Publication supprimée avec succès!');\r\n        setPosts((prevPosts) => prevPosts.filter((post) => post.id !== postId));\r\n      } else {\r\n        alert(\"Erreur lors de la suppression de la publication.\");\r\n      }\r\n    } catch (error) {\r\n      console.error('[ERREUR] Erreur lors de la suppression de la publication :', error);\r\n    }\r\n  };\r\n  \r\n\r\n  const handleDeleteRetweet = async (publicationId) => {\r\n    try {\r\n      const response = await fetch(\r\n        `${apiUrl}/api/retweets/${publicationId}/${currentUser.id}`,\r\n        {\r\n          method: 'DELETE',\r\n        }\r\n      );\r\n  \r\n      if (response.ok) {\r\n        alert('Retweet supprimé avec succès!');\r\n        setRetweets((prevRetweets) => prevRetweets.filter((r) => r.id !== publicationId));\r\n\r\n      } else {\r\n        alert(\"Erreur lors de la suppression du retweet.\");\r\n      }\r\n    } catch (error) {\r\n      console.error('[ERREUR] Erreur lors de la suppression du retweet :', error);\r\n    }\r\n  };\r\n  \r\n\r\n  // Handle follow/unfollow action\r\n  const handleFollow = async () => {\r\n    try {\r\n      const url = isFollowing ? '/unfollow' : '/follow';\r\n      const response = await fetch(`${apiUrl}/api/users${url}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ followerId: currentUser.id, followingId: profileUser.id })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setFollowerCount((prevCount) => (isFollowing ? prevCount - 1 : prevCount + 1));\r\n        setIsFollowing(!isFollowing);\r\n        console.log(\"Action de suivi réussie :\", await response.json()); // Affiche les détails de la réponse\r\n      } else {\r\n        console.error(\"Erreur lors de l'action de suivi :\", await response.json());\r\n      }\r\n    } catch (error) {\r\n      console.error('[ERREUR] Erreur lors du suivi:', error);\r\n    }\r\n  };\r\n\r\n\r\n  // Save biography\r\n  const handleBioSave = async () => {\r\n    try {\r\n      const response = await fetch(`${apiUrl}/api/users/${id}/bio`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ bio })\r\n      });\r\n      if (response.ok) {\r\n        alert('Biographie mise à jour avec succès!');\r\n      } else {\r\n        alert('Erreur lors de la mise à jour de la biographie.');\r\n      }\r\n    } catch (error) {\r\n      console.error('[ERREUR] Erreur lors de l\\'enregistrement de la biographie:', error);\r\n    }\r\n  };\r\n\r\n  // Handle comments for a post\r\n  const handleComment = async (postId, comment) => {\r\n    if (!comment.trim()) {\r\n      alert(\"Le commentaire ne peut pas être vide.\");\r\n      return;\r\n    }\r\n    try {\r\n      await fetch(`${apiUrl}/api/publications/${postId}/comment`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId: currentUser.id, comment })\r\n      });\r\n      fetchProfileData(); // Refresh profile data after adding comment\r\n    } catch (error) {\r\n      console.error('[ERREUR] Erreur lors du commentaire:', error);\r\n    }\r\n  };\r\n\r\n  // Share a post\r\n  const handleShare = (postId) => {\r\n    alert(`Publication partagée : ${postId}`);\r\n  };\r\n\r\n  // Fetch comments for a post\r\n  const fetchComments = async (postId) => {\r\n    try {\r\n      const response = await fetch(`${apiUrl}/api/publications/${postId}/comments`);\r\n      const data = await response.json();\r\n      setComments((prevComments) => ({\r\n        ...prevComments,\r\n        [postId]: data,\r\n      }));\r\n      setActiveComments((prev) => ({\r\n        ...prev,\r\n        [postId]: !prev[postId],\r\n      }));\r\n    } catch (error) {\r\n      console.error('[ERREUR] Erreur lors de la récupération des commentaires:', error);\r\n    }\r\n  };\r\n\r\n  const fetchExtraProfileData = useCallback(async () => {\r\n    try {\r\n      const res = await fetch(`${apiUrl}/api/users/${id}/extra-data`);\r\n      if (!res.ok) throw new Error(\"Erreur lors de la récupération des données supplémentaires\");\r\n\r\n      const data = await res.json();\r\n      setExtraData(data);\r\n      console.log(data);\r\n    } catch (error) {\r\n      console.error(\"[ERREUR] Erreur lors de la récupération des données supplémentaires:\", error);\r\n    }\r\n  }, [id]);\r\n\r\n\r\n  // Appelez ensuite les fonctions dans `useEffect` pour charger les données supplémentaires\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      // Récupérer les données de profil de l'utilisateur\r\n      fetchProfileData();\r\n\r\n      // Récupérer les données supplémentaires\r\n      fetchExtraProfileData();\r\n\r\n      // Récupérer les données du portefeuille\r\n      fetchWalletData();\r\n    }\r\n  }, [currentUser, fetchProfileData, fetchExtraProfileData, fetchWalletData]); // Cela appelle les fonctions quand `currentUser` change\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      {profileUser ? (\r\n        <>\r\n               <div className=\"profile-header\">\r\n  <img\r\n    src={\r\n      profileUser.profilePicture\r\n    \r\n        ? `${apiUrl}${profileUser.profilePicture}`\r\n        : '/images/default-profile.png' // Chemin de l'image par défaut\r\n    }\r\n    alt=\"Profile\"\r\n    className=\"profile-picture\"\r\n  />\r\n\r\n\r\n            <div className=\"profile-info\">\r\n              <h2>{profileUser?.username || 'Nom indisponible'}</h2>\r\n  \r\n              {isOwner && <button>Modifier le profil</button>}\r\n  \r\n              <p>\r\n                <strong>{followerCount}</strong> abonnés\r\n              </p>\r\n  \r\n              {isOwner ? (\r\n                <>\r\n                  <input type=\"file\" onChange={handleFileChange} />\r\n                  {newProfileImage && (\r\n                    <div>\r\n                      <Cropper\r\n                        src={newProfileImage}\r\n                        style={{ height: 200, width: '100%' }}\r\n                        aspectRatio={1}\r\n                        guides={false}\r\n                        viewMode={1}\r\n                        minCropBoxHeight={10}\r\n                        minCropBoxWidth={10}\r\n                        background={false}\r\n                        responsive={true}\r\n                        autoCropArea={1}\r\n                        checkOrientation={false}\r\n                        onInitialized={(instance) => setCropper(instance)}\r\n                      />\r\n                      <button onClick={handleProfileImageSave}>Confirmer la nouvelle photo de profil</button>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <button onClick={handleFollow}>{isFollowing ? 'Se désabonner' : 'Suivre'}</button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n\r\n          <div className=\"profile-tabs\">\r\n  <button\r\n    className={`tab-button ${activeTab === 'publications' ? 'active' : ''}`}\r\n    onClick={() => setActiveTab('publications')}\r\n  >\r\n    Mes Publications\r\n  </button>\r\n  <button\r\n    className={`tab-button ${activeTab === 'retweets' ? 'active' : ''}`}\r\n    onClick={() => setActiveTab('retweets')}\r\n  >\r\n    Mes Retweets\r\n  </button>\r\n</div>\r\n\r\n  \r\n          <div className=\"profile-bio\">\r\n            {isOwner ? (\r\n              <>\r\n                <textarea value={bio} onChange={(e) => setBio(e.target.value)} />\r\n                <button onClick={handleBioSave}>Enregistrer la bio</button>\r\n              </>\r\n            ) : (\r\n              <p>{profileUser.bio || 'Cet utilisateur n\\'a pas encore de biographie.'}</p>\r\n            )}\r\n          </div>\r\n  \r\n          <div>\r\n            Données supplémentaires :\r\n            {extraData && typeof extraData === 'object' ? (\r\n              <ul>\r\n                {Object.entries(extraData).map(([key, value]) => (\r\n                  <li key={key}>\r\n                    <strong>{key} :</strong> {value}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            ) : (\r\n              'Aucune donnée'\r\n            )}\r\n          </div>\r\n  \r\n          <div className=\"transaction-history\">\r\n            <h3>Historique des Transactions</h3>\r\n            {transactions.length > 0 ? (\r\n              <ul>\r\n                {transactions.map((transaction) => (\r\n                  <li key={transaction.transactionId}>\r\n                    {transaction.type === 'earn' ? 'Gagné' : 'Dépensé'} : {transaction.amount} ONVM Coins le{' '}\r\n                    {new Date(transaction.date).toLocaleDateString()}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            ) : (\r\n              <p>Aucune transaction pour le moment.</p>\r\n            )}\r\n          </div>\r\n  \r\n          {isOwner && (\r\n            <div className=\"actions-section\">\r\n              <button className=\"action-button live-button\" onClick={() => navigate('/live')}>\r\n                <FaVideo /> Démarrer un Live\r\n              </button>\r\n              <button className=\"action-button withdraw-button\" onClick={handleWithdraw}>\r\n                Retirer\r\n              </button>\r\n            </div>\r\n          )}\r\n  \r\n          {posts.length > 0 ? (\r\n            posts.map((post) => (\r\n              <div key={post.id} className=\"profile-post\">\r\n                {post.media ? (\r\n                  post.media.endsWith('.mp4') ? (\r\n                    <video src={`${apiUrl}${post.media}`} controls />\r\n                  ) : (\r\n                    <img src={`${apiUrl}${post.media}`} alt={post.content} />\r\n                  )\r\n                ) : (\r\n                  <p>{post.content}</p>\r\n                )}\r\n<button\r\n  className=\"delete-button\"\r\n  onClick={() => handleDeleteRetweet(post.id)}\r\n  title=\"Supprimer ce retweet\"\r\n>\r\n  ✖\r\n</button>\r\n\r\n\r\n<button\r\n  className=\"delete-button\"\r\n  onClick={() => handleDeletePost(post.id)}\r\n  title=\"Supprimer cette publication\"\r\n>\r\n  ✖\r\n</button>\r\n\r\n\r\n\r\n                <div className=\"post-actions\">\r\n                  <button onClick={() => fetchComments(post.id)}>\r\n                    <FaComment /> {comments[post.id]?.length || 0} Commentaires\r\n                  </button>\r\n                  <button onClick={() => handleShare(post.id)}>\r\n                    <FaShare /> Partager\r\n                  </button>\r\n                  <button onClick={() => handleRetweet(post.id)}>\r\n                    <FaRetweet /> Retweeter\r\n                  </button>\r\n                </div>\r\n  \r\n                {activeComments[post.id] && (\r\n                  <div className=\"comments-section\">\r\n                    {comments[post.id]?.map((comment, index) => (\r\n                      <div key={index} className=\"comment\">\r\n                        <img\r\n                          src={comment.profilePicture ? `${apiUrl}${comment.profilePicture}` : '/default-profile.png'}\r\n                          alt=\"Profil\"\r\n                          className=\"profile-picture-comment\"\r\n                        />\r\n                        <strong>{comment.username}</strong>\r\n                        <p>{comment.comment}</p>\r\n                      </div>\r\n                    ))}\r\n                    <div className=\"add-comment-section\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={newComment}\r\n                        onChange={(e) => setNewComment(e.target.value)}\r\n                        placeholder=\"Ajouter un commentaire...\"\r\n                      />\r\n                      <button onClick={() => handleComment(post.id, newComment)}>Envoyer</button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p>Aucune publication pour le moment.</p>\r\n          )}\r\n  \r\n          <div className=\"profile-grid\">\r\n            <div className=\"tabs\">\r\n              <button\r\n                className={`tab-button ${activeTab === 'publications' ? 'active' : ''}`}\r\n                onClick={() => setActiveTab('publications')}\r\n              >\r\n                Mes Publications\r\n              </button>\r\n              <button\r\n                className={`tab-button ${activeTab === 'retweets' ? 'active' : ''}`}\r\n                onClick={() => setActiveTab('retweets')}\r\n              >\r\n                Mes Retweets\r\n              </button>\r\n            </div>\r\n  \r\n            {activeTab === 'publications' && (\r\n              <>\r\n                <h3>Mes publications</h3>\r\n                {posts.length > 0 ? (\r\n                  posts.map((post) => (\r\n                    <div key={post.id} className=\"profile-post\">\r\n                      {post.media ? (\r\n                        post.media.endsWith('.mp4') ? (\r\n                          <video src={`${apiUrl}${post.media}`} controls />\r\n                        ) : (\r\n                          <img src={`${apiUrl}${post.media}`} alt={post.content} />\r\n                        )\r\n                      ) : (\r\n                        <p>{post.content}</p>\r\n                      )}\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <p>Aucune publication pour le moment.</p>\r\n                )}\r\n              </>\r\n            )}\r\n  \r\n  {activeTab === 'retweets' && (\r\n  <div className=\"retweets-section\">\r\n    <h3>Mes retweets</h3>\r\n    {retweets.length > 0 ? (\r\n      retweets.map((retweet) => (\r\n        <div key={retweet.id} className=\"profile-post\">\r\n          {/* Bouton de suppression */}\r\n          <button\r\n            className=\"delete-button\"\r\n            onClick={() => handleDeleteRetweet(retweet.id)}\r\n            title=\"Supprimer ce retweet\"\r\n          >\r\n            ✖\r\n          </button>\r\n          <p>{retweet.content}</p>\r\n          <div className=\"post-actions\">\r\n            <button onClick={() => fetchComments(retweet.id)}>\r\n              <FaComment /> {comments[retweet.id]?.length || 0} Commentaires\r\n            </button>\r\n            <button onClick={() => handleShare(retweet.id)}>\r\n              <FaShare /> Partager\r\n            </button>\r\n            <button onClick={() => handleRetweet(retweet.id)}>\r\n              <FaRetweet /> Retweeter\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ))\r\n    ) : (\r\n      <p>Aucun retweet pour le moment.</p>\r\n    )}\r\n  </div>\r\n)}\r\n\r\n{/* Fin de la condition activeTab === 'retweets' */}\r\n</div>\r\n\r\n{/* Fin du profil utilisateur */}\r\n</>\r\n) : (\r\n  <p>Chargement...</p>\r\n)}\r\n\r\n{/* Navigation en bas de page */}\r\n<div className={`bottom-nav ${showBottomNav ? 'visible' : 'hidden'}`}>\r\n  <FaHome onClick={() => navigate('/')} title=\"Accueil\" />\r\n  <FaSearch onClick={() => navigate('/search')} title=\"Recherche\" />\r\n  <FaPlus onClick={() => setIsCreating((prev) => !prev)} title=\"Créer une publication\" />\r\n\r\n  <FaBell onClick={() => navigate('/notifications')} title=\"Notifications\" />\r\n  <FaUser onClick={() => navigate(`/profile/${currentUser?.id}`)} title=\"Mon profil\" />\r\n</div>\r\n</div>\r\n);\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}